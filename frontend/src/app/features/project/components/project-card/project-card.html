<div class="group bg-white rounded-2xl shadow-lg overflow-hidden relative flex flex-col border border-gray-200 transition transform hover:scale-[1.01] hover:shadow-2xl">

    <!-- Boutons edit/delete -->
    <div class="absolute top-3 right-3 flex gap-2 z-10">

        <!-- EDIT -->
        <button type="button" (click)="edit.emit(project)" aria-label="Edit project"
            class="p-2 bg-white/80 backdrop-blur rounded-full text-indigo-600 hover:text-indigo-800 shadow">
            <lucide-icon name="edit" size="16" class="inline-block"></lucide-icon>
        </button>

        <!-- DELETE -->
        <button type="button" (click)="delete.emit(project._id)" aria-label="Delete project"
            class="p-2 bg-white/80 backdrop-blur rounded-full text-red-500 hover:text-red-700 shadow">
            <lucide-icon name="x" size="16" class="inline-block"></lucide-icon>
        </button>
    </div>


    <div class="relative">
        <img [src]="project.image | imageFallback" alt="{{project.title}}" class="w-full h-44 object-cover">
        <div class="absolute inset-0 bg-gradient-to-t from-black/40 via-black/10 to-transparent"></div>
        <div class="absolute bottom-3 left-3 flex items-center gap-2">
            <span *ngIf="project.status" [ngClass]="project.status | statusColor"
                  class="px-3 py-1 text-xs font-semibold rounded-full bg-white/80 backdrop-blur text-gray-800">
                {{ project.status }}
            </span>
        </div>
    </div>

    <div class="p-5 flex-1 flex flex-col">
        <div class="flex items-start justify-between mb-2">
            <h2 class="text-lg font-semibold text-gray-900 group-hover:text-indigo-700 transition-colors">{{ project.title }}</h2>
        </div>
        <p class="text-gray-600 mb-3 flex-1">{{ project.description | truncate:140 }}</p>
        <div class="flex flex-wrap gap-2 mb-3">
            <span *ngFor="let tech of project.techStack" class="px-2.5 py-1 bg-indigo-50 text-indigo-700 rounded-full text-xs font-medium">
                {{ tech }}
            </span>
        </div>

        <div class="text-xs text-gray-400 mt-2">{{ project.techStack | techList }}</div>

        <div class="mt-auto flex gap-3 pt-4 border-t border-gray-100">
            <a [href]="project.linkDemo" target="_blank" class="text-sm px-3 py-1.5 bg-indigo-50 text-indigo-700 rounded-lg hover:bg-indigo-100"
                [hidden]="!project.linkDemo">Demo</a>

            <a [href]="project.linkGithub" target="_blank" class="text-sm px-3 py-1.5 bg-gray-100 text-gray-800 rounded-lg hover:bg-gray-200"
                [hidden]="!project.linkGithub">Github</a>
        </div>
    </div>
</div>